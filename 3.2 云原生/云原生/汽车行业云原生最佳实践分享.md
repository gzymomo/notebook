- [汽车行业云原生最佳实践分享](https://mp.weixin.qq.com/s/B6EI16rlqb-spwBooJK9-w)

灵雀云解决方案架构师赵昕在“数据驱动企业未来，甲骨文基础架构/汽车行业专场”会上，分享了灵雀云全栈云原生平台在汽车行业数字化转型中的应用。他指出，“更高科技的车”正在取代“更好操控的车”，汽车的智能化程度正在变高，意味着IoT/边缘计算的场景越来越多，汽车行业也会越来越多地采用云原生方案去适配“智慧汽车”的应用，提高汽车的“智能化水平”，进而为车企带来更高的销量。

## 应“云”而生的云原生

赵昕指出，“云原生”是一类技术的统称，通过“原生”的技术可以构建出更易于弹性扩展的“云”应用，所以“云原生”是“云”和“原生”两个词构成的。应“云”而生的这种硬件、软件架构，组合起来就是真正的“云原生”。

![image-20220104220856017](https://gitee.com/er-huomeng/img/raw/master/img/image-20220104220856017.png)



而从技术角度来讲，从最开始的计算资源的云化到业务的云化，实质是传统单体架构应用开发、测试、上线都存在困难的情况下，转变成“云”应用，再依托“云原生”技术把它变成“原生”的“云”应用，然后借助于容器技术进行部署。而且云原生应用不需要考虑对底层资源的适配或者组合逻辑，所以称为“云原生”。

## 云原生助力车企数字化转型

云原生之所以成为当前的热门话题，得从数字化转型说起。早期的IT部门对于企业来说，是支撑部门、运维部门，但是**在数字化时代业务的竞争实质上已经变成了IT的竞争**，因为企业需要用新型的IT技术来服务业务应用。

导致这一现象的原因，首先是企业应用数量变多了。企业IT以运维为中心变成以应用为中心，应用的数量需要满足用户快速增长的需求。其次，自研应用占比变高了，因为这些新型应用都是强业务相关的，需要企业深度介入研发。再次，应用敏捷度要求更高，应用为中心的时代，企业想要在竞争中占据领先地位，就要求应用更敏捷，应用也会变得越来越复杂。最后，越来越多的复杂应用有解耦的需求。

![image-20220104220903434](https://gitee.com/er-huomeng/img/raw/master/img/image-20220104220903434.png)



这就带来了一个核心的问题，什么样的技术能解决上述4类需求？原有的IT技术架构是完全无法处理这些问题的，**云原生技术正是解决这些问题的关键**。

首先，云原生领域的容器技术、微服务，它能解决问题的核心点就在于它能够利用容器技术让代码部署的频次变得更高，而容器技术的快速交付，也能够让业务应用从提交到部署生产的速度变得更快。其次，我们利用DevOps流水线能够将bug以及补丁修复的时间变得更短。此外，容器技术跟底层系统或者说硬件资源是解耦的，使得人们也可以做到快速的多云运维。同时，大量的业务应用能够享受到容器技术的这种弹性资源，实现资源的利用效率提升，对企业来说也是一个更经济的解决方案。不仅如此，容器技术还能实现自动化运维，也能够让企业更有效率的去维护应用。所以说，**云原生其实是企业数字化转型最适合的解决方案**。

回到汽车行业，以往，人们买车可能看重的是车的质量以及操控性等，现在，车的智能程度越来越多的影响到用户购买意愿，**“更高科技的车”正在取代“更好操控的车”**。正因为汽车本身的智能化程度变高，IoT的场景或者说边缘计算的场景越来越多，汽车企业也会越来越多的采用云原生的方案去适配“智慧汽车”的应用，提高汽车的销量。

## 灵雀云“全栈”云原生解决方案

灵雀云在云原生方向，提供“全栈”云原生解决方案。谈起云原生人们往往会提及“三驾马车”，也就是容器、微服务和DevOps，全栈云原生怎么理解？赵昕介绍到，灵雀云全栈云原生方案不止涵盖了这些方面，还涵盖了数据服务和IT治理等功能。可以细分几个层面：

![image-20220104220910560](https://gitee.com/er-huomeng/img/raw/master/img/image-20220104220910560.png)



首先，**应用的运行**层面。灵雀云产品提供了云原生的基础设施，包括容器集群管理、基于容器的虚拟化等。

在容器集群的网络方面也提供多种容器网络供用户选择。目前灵雀云适配了社区常见的Flannel和Calico等容器网络，也提供灵雀云自研并贡献给CNCF的Kube-OVN网络模式，同时，平台上也提供云原生存储、云原生操作系统，整个平台部署在适合混合云治理的场景，不管是虚拟机、物理机，包括不同的公有云、私有云、混合云，都能够支持。所以，灵雀云平台第一层能够为应用提供相应的容器化计算资源，向上能够承载相应的业务应用。

第二，**应用的治理**。对分布式的应用，平台可以做容器化的拆分使其运行在平台上，也可以对已经实现了微服务架构的应用进行相应的治理，未来平台还将提供无服务等业务应用。

第三，**应用的开发**。对于业务应用的开发层面，平台还提供云原生化的交付。交付实际上是把不同的工具链进行整合，构建在一个平台之上，形成一个产品交付给用户使用，也就是把项目管理工具，包括代码仓库、持续集成工具等构建起来形成全流程的编排，用户在平台上直接点击操作就能够使用这个云原生交付的产品，整个的流程都是可视化的。

第四，**云原生的数据服务**。包括常见的MySQL、Redis、Kafka，MongoDB等数据库、中间件和消息队列，用户无需付出额外的成本，在平台上一键就可以部署，平台也对其提供相应的技术支持服务。

第五，**IT治理**。使用这样的平台，实际上用户更需要有一套管理的功能。因此，平台还构建了IT治理功能，实现了统一的运维、统一的治理。不管哪种业务应用，不管哪个部门，在这个平台上都可以使用统一的巡检、监控、告警日志等功能，改变了以往企业以业务应用为中心的运维模式。

同时，平台还能够提供统一的治理，这个治理指的是相应的租户有相应的权限，有相应的配额管理。对于车企来说，不同的开发部门可以使用不同的租户，虽然大家使用的是同一套平台，但是各个业务都是相互隔离的，互不可见的，同时平台对租户的计算资源总量可以进行设置，保证不会存在某一个部门把所有的计算资源独占的情况，此外，平台对租户下面的运营、开发、管理人员设置不同的权限，实现符合业务架构的权限设置。

## 汽车行业云原生实践

### 某大型车企

灵雀云全栈云原生平台在汽车行业有两个非常典型的案例。第一个就是某大型车企的容器云平台。2018年，在高并发访问、高吞吐量以及车辆的车联网接入需求推动下，其智能网联应用做微服务的改造和应用容器化，“智能网联开发院”和“数字化部门”联合起来对整个平台架构进行了相应的设计，在平台建设中核心痛点就是需要引入一个微服务的治理平台，以及一个业务应用的管理平台，来支撑整个智能网联平台的开发需要。

项目依托于灵雀云ACP管理平台，配合微服务治理平台，实现了业务应用的运行以及业务应用治理的工作。项目一期实现部分服务器的纳管，形成计算资源池，为业务应用提供部署资源。同时，通过微服务治理功能，实现为业务应用的不同部门或者不同开发团队，适配相应的容器化集群。

当然，平台的落地并不能只是把工具提供给了客户，让客户更好地用起来，也是一个非常大的挑战，尤其对于微服务这样比较新的概念来说。灵雀云在项目当中也为客户提供了微服务治理咨询服务，对于微服务的拆分，微服务改造，以及如何更好地使用平台的各种功能都提供了有针对性的咨询服务。

经过几年的努力，该车企的营销数字化业务的不同业务系统都逐渐迁移到这个平台上来。这么大规模的平台和业务应用，运维人员可能只需要3~5个人。

对于他们来说，能得到的收益，首先就是统一业务系统的开发架构，第二是统一了业务系统的部署架构，第三是极大的减少了复杂的业务系统运维，少量的人员就可以支持大量的业务系统的运维工作，同时，通过平台的资源自动伸缩、微服务治理能力，项目实现了自动化的业务运行、运维和业务治理。

### 吉利集团

在工业互联网的背景下，吉利集团依托灵雀云的容器和微服务相关技术，构建了一个能力开放的 PaaS平台。平台包含4个部分：

![image-20220104220918771](https://gitee.com/er-huomeng/img/raw/master/img/image-20220104220918771.png)



- **DevOps平台：**提供从代码到构建到交付全流程，以及不同环境下的管理能力，实现业务需求的快速响应，提升应用的快速迭代和交付的能力，降低开发的投入等。

- **应用支撑平台：**基于多租户的集群管理、配额管理、资源调度等能力，实现不同的开发团队在同一套平台上构建或者部署自己业务应用的需求。

- **统一的监控平台：**把这么多的业务系统融合在同一个平台上进行管理，需要监控平台提供相应业务应用的监控、告警日志，也包括计量计费的功能。

- **构建开放的能力：**依托容器平台提供一个开放能力，把不同的服务通过API接口网关的形式，对内或者对外提供安全、稳定、开放的API服务。

对于吉利集团来说，基于灵雀云容器云、DevOps、容器应用支撑、中间件能力，以及开放的API接口，打造了集团工业互联网复杂应用的统一底座，同时获得了巨大收益：

首先加速了业务的交付，实现可构建、实施、发布，亦即应用快速发布的核心理念。

第二能够在平台上构建相应的中间件服务，降低应用研发的成本，提高应用的优势。

第三能够提供全维度的统计和分析，包括计量计费和租户管控等，提高了运营的效率。

第四实现运营化的IT，平台提供的资源底座，能够实现资源的共享、弹性的调度，提高资源的利用率。

第五实现未来的云边协同基础，边缘计算场景、跨云的演进需要灵活、平滑的协作，平台支撑边缘计算场景的快速落地，满足核心业务的快速上线。

## 开源和商业产品不矛盾

那么，在开源大行其道的时代，车企应该选择开源产品，还是选择灵雀云这样的平台供应商？赵昕认为，开源和商业产品并不矛盾，其实还是要看企业的人员配置和业务。

对于车企来说，核心能力是业务系统的研发。基于第三方成熟平台来推进业务，享受平台提供的兜底服务，或许是更好的选择，车企只要基于平台能力来协助业务更好地实现就可以了。

灵雀云是CNCF中国区的核心成员，率先通过了一致性认证计划，还通过了CNCF官方发布的标准化认证，是CNCF认证的K8s服务提供商。同时，灵雀云也是国内首批Linux基金会认证培训的合作伙伴，也是CKA认证培训合作伙伴，所以在云原生和开源方面，灵雀云有非常深厚的技术实力。

## 健壮底层基础设施稳定PaaS基础

虽然容器平台或者PaaS平台对底层的基础设施没有过多要求，但基础设施层在客户落地的过程当中，往往会分散精力，还会影响实施周期，所以使用比较成熟的私有化的产品，能够给PaaS平台一个非常稳固的支撑，PaaS平台的弹性伸缩能力和自动化运维等能力也不会打折扣。

在这方面，Oracle的私有云一体机突出优势就是简单便捷，客户只需要花费几个小时就能实现系统就绪，在其上搭建更高层的云原生平台就有了非常健壮的基础设施做保证。