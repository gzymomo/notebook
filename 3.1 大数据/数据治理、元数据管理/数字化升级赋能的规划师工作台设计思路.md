- [数字化升级赋能的规划师工作台设计思路 (qq.com)](https://mp.weixin.qq.com/s/37Uhenl9oxTmFBRzNj-dWQ)

# **01现状分析**

## **1.1 数据治理困难**

为加强交通大数据对规划设计的量化分析支撑，推动规划升级，需加快推动面向规划应用的数据智能计算管理平台构建。交通规划所需数据量大、种类多，而不同类型的规划数据分散在各个业务部门，难以系统收集，阻碍了交通大数据支撑规划应用。原始数据获取之后需要经过大量的清洗、计算和校核才能运用于规划场景分析，对规划人员的技术能力要求较高，且难以保证数据指标的精准性。核心规划指标的计算结果参差不齐，将严重影响大数据在规划应用方面的公信力。现阶段亟须面向规划应用场景构建数据智能计算管理平台，提供统一全面的规划指标分析服务。

## **1.2 模型应用复杂**

为推广规划技术人员对交通模型的大规模应用，需通过技术封装，实现模型使用的流程化、便捷化。现阶段常用的模型软件以单机运算为主，模型测试周期过长，不利于交通模型对复杂规划场景的应用。各地建模方法和校核参数的差异性也导致模型通用性较差。基于分布式计算框架构建交通模型体系，能够有效提升模型运算效率，实现规划方案模型测试的响应式服务。

## **1.3 成果经验流失**

为传承优秀交通规划分析与成果表达经验，需面向交通规划业务场景，搭建规范化的专题分析工具。特定的规划场景需要依赖海量的数据与复杂的算法支撑，而传统分析方法需进行大量的人工调查，不仅成本高、耗时长，而且难以保证准确性。现阶段规划分析与成果表达主要依赖规划师个人经验，缺乏支撑各类规划项目的通用分析模板，使优秀的规划经验难以传承。

因此，需要以规划设计意图为源头，以数据模型分析为工作支撑，奠定体系化、集成式规划分析基础，并形成各类规划过程分析表达专用模板，快速响应规划业务需求。

# **02 建设需求及目标**

近年来建设的交通大数据平台重点解决了数据监测分析层面的业务问题，但大数据决策平台未能贴合客户实际工作，也未下沉到业务流程中。总体来说，目前市场尚缺乏以平台化的思路解决综合交通规划与政策评估、城市综合交通治理等关键问题，未能实现真正的决策支持。

为满足规划数据查询、规划协同模板分析、云上模型测试应用诉求，应通过集成全面的数据指标与场景应用，面向交通规划打造一款规划设计专用分析云平台，可为规划人员提供专业、准确、高效的规划数据分析、规划过程表达、规划方案测试服务，向上支撑区域规划、城市及分区规划、片区规划、专项规划编制等应用，打造交通规划大数据平台，具有重要现实意义。

# **03 设计概述**

## **3.1 功能架构**

交通规划大数据平台包括数据底座、指标上图、规划定制、超级模型四大功能板块(图1)。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/Gx7CCvSJCTekkd8KtFcu97IQpp1xRTYDxADjGO35tIfBJWADDOVKpklk9w2ZkAeQIASQKKeV4jyWGk5rzQ0JnA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

**图1 系统功能概述**

数据底座板块为数据管理平台，集合了数据汇聚、数据治理、数据服务、数据共享等多项功能，同时引入先进的K8S集群，构建算法平台，自由上架模型算法，提供更好的计算和决策支撑能力。指标上图板块为标准化交通数据资源的智能化查询和分析工具，可通过自定义区域或设置查询条件对各类交通大数据进行分析展示。同时，结合特殊应用场景，搭建专题分析模块，实现复杂指标的快速计算和可视化展示。规划定制板块为在线制图和查询分析工具，提供多种数据资源和多个专题图模板供用户使用，支持用户在线调用数据创建专题图，或直接调用模板定制专题图和相关数据表。超级模型板块为模型云平台，通过云上交通模型平台实现交通模型快速构建与模型云上测试，实现规划方案的响应式测试服务。系统功能架构如图2所示。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/Gx7CCvSJCTekkd8KtFcu97IQpp1xRTYD0iaGt7URDUjVFQCZoWhrNbOkVKJ80K3thsyxEiaKPkQw4oop1OXfnvvA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

**图2 系统功能架构**

## **3.2 技术架构**

系统技术架构自下向上可划分为采集层、数据层、支撑层、应用层、展示层共五层(图3)。其中，采集层依赖数据平台工具dataworks、消息队列kafka汇聚动静态多源交通大数据；数据层通过hive存储离线和实时的原始数据，通过minIO 对象存储工具对文件进行存储管理，空间数据和部分指标数据存储在postgresql，使用postgis扩展模块实现空间数据统计分析功能，海量指标数据采用分析型数据库clickhouse进行存储；支撑层提供数据中台和算法中台两大模块，依托K8S集群实现分布式资源调度，提供算法和数据接口开发支持；应用层包含指标上图、规划定制、超级模型等Springboot微服务、Geoserver地图服务、地理底图服务，各微服务承上启下，调用平台层各接口和算法，并为前端展示层提供接口服务；展示层使用主流的Vue框架、mapboxgl地图引擎、ECharts图表和elementUI框架。

**图3 系统技术架构**

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/Gx7CCvSJCTekkd8KtFcu97IQpp1xRTYDCsGZVO92FQju3xUkCuZKjibaMGWTopYCRWjBzJyy4gWHR46REM049vw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

# **04 系统设计**

## **4.1 数据底座**

通过标准化的规划数据指标体系，自带“数据服务+本地数据”接入能力作为规划治理的核心数据底座(图4)。整个平台构建在TransPaaS数据中台和算法中台之上，数据中台具备强大的数据汇聚治理能力，支持规划数据指标的便捷接入和统一管理。算法中台提供内置的数据清洗、计算和校核服务，可将原始数据快速转换为规划指标。数据底座功能包括数据汇聚、数据治理、数据服务、数据共享、算法模型五个方面。

![图片](https://mmbiz.qpic.cn/mmbiz_jpg/Gx7CCvSJCTekkd8KtFcu97IQpp1xRTYD1ianFUficpne7UwicZFfeGl7FMDo8afpHJn0S6BM1KGaFoHoCB9qpLF5w/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1)

**图4 数据底座**

### **4.1.1 数据汇聚**

通过数据底座的建设，可解决目前道路运行、公交服务、重点车辆、人员出行、交通事件、交通安全等交通行业数据资源分布复杂的问题，使不同部门不同业务系统的数据汇聚起来，突破数据孤岛和难以实现数据融合的困境。

### **4.1.2 数据治理**

交通规划大数据平台的建设，将形成完善的数据标准体系，以达到易于复用的目的。同时由于数据集中，可以对数据资产进行统一管理，有效解决数据质量、数据命名和定义冲突、数据安全等问题。

### **4.1.3 数据服务**

数据底座的建设可以促使数据产生应用的价值——建立统一的交通数据开放服务平台，提供统一规范化管理的数据服务工具，打通系统之间的信息流，实现不同业务系统的数据流通和一体化管理，提升作业效率及数据互动的用户体验。

### **4.1.4 数据共享**

建立用户智能认证鉴权技术与数据敏感分级技术，打通不同业务、系统之间的账号体系，实现数据资源安全可控的开放共享。

### **4.1.5 算法模型**

将交通算法与模型沉淀到算法中台，构成交通大脑中枢，通过容器化封装技术，建设通用算法池与业务算法池，为众多业务系统提供一致而又相互隔离的算法服务，快速为业务系统赋能。

## **4.2 指标上图**

指标上图板块基于交通大数据的分析，按照点、线、面统一空间要素整合规划数据指标，对城市不同交通方式的出行需求特征、现状交通供给进行深入分析，并面向道路流量溯源、公共交通PTAL可达性客流溯源分析、轨道换乘客流及溯源分析量化支撑规划场景应用。通过数据分析辅助开展交通规划工作，提高规划工作的针对性和科学性。指标上图从指标总览、交通需求、道路交通、常规公交、轨道交通五个方面提供超过60个功能页面，具有指标全面、查询便捷、灵活定制、简洁美观等优点。

页面设计由查询条件栏、地图呈现、图表弹窗、图例设置面板四个元件组成。查询条件栏根据数据维度设置统一查询规律，可精确查找到最小颗粒度的数据，如5分钟的道路运行情况。

地图呈现根据规划常用地图形式呈现对应规划指标，具有典型、规范、标准的特点，并在交通需求板块设置常用的出行蛛网图、出行OD图、人员活动热力图等。数据展现形式符合规划分析要求，注重结论呈现和表达样式的优化，并且提供自定义边界尺度的统计分析。同时，地图采用geoserver地图服务、地理底图服务，支持选中某一个或多个要素，并查看要素属性和分析指标。图例设置基于WebGIS的个性化制图功能，支持修改图层颜色、线宽、透明度等。

结合规划应用场景，对规划指标进行深层次的挖掘与关联分析，提供复杂的专题分析应用，如道路流量溯源、通道流量溯源、道路出行距离分析等，支撑项目层级的精细化规划分析。针对人员出行、道路交通、常规公交和轨道交通等子系统延伸专题分析场景，在既有的交通流量溯源功能基础上新增公交客流溯源、公共交通PTAL分析、公交线路OD、公交轨道换乘客流分析等10项功能，实现传统交通规划方法难以完成的专题场景分析，拓展规划应用的广度和精度。

## **4.3 规划定制**

规划定制板块支持使用者将点、线、面等不同空间维度的图层和数据叠加至地图界面，实现空间数据的自由组合，快速完成从数据指标到自定义规划专题图的转变。针对常见的业务场景，平台预制了超过30个的公共专题图供用户直接调用，如现状用地分布图、现状轨道站点全日上下客流量图、常住人口密度分布图、从业人员密度分布图、高速公路流量分布图、长三角铁路站点客运发送量图等。

专题图存储在公共专题图区域，并按照展示内容分文件夹存放，使用者可在工作平台页面直接调用。与此同时，平台支持用户自己修改或制作专题图，如关闭图层、添加图层、调整图层顺序；更改图层颜色、线路宽度、图层透明度等偏好设置；添加标注、更改标注字段和标注形式等；添加、关闭图例等；根据属性筛选数据。用户自己修改或制作的专题图可保存在个人空间，也可以分享给其他用户。

平台提供了多种空间图表和平面图表，支持对数据资源的多样化呈现。空间图表包括饼状统计图、柱状统计图、等级符号图、热力图、期望线图、蛛网图，用于各种数据的空间展示，如用等级符号图制作轨道站点的换乘客量分布图等。平面图表包括折线图、柱状图、饼状图、雷达图、矩形图、关系图等。平面图悬浮于空间图层，主要对空间图层进行补充说明或汇总信息，如轨道线路分布图中增加历年轨道交通年客运量的柱状图。同时，平面图表还可用于制作核心监测指标的显示面板，用于核心指标的监测和查询。

在开发过程中，针对GIS-T不同于一般GIS功能，按照交通流双向性的特点，系统针对双向标签、双向颜色专题、双向大小符号专题等进行了特殊开发，以满足GIS系统对交通数据的展示要求。

## **4.4 超级模型**

现有模型软件平台的封闭性限制了交通模型的价值发挥及推广应用，规划平台的建设从方便用户使用、利于行业普及的角度出发，一方面向轻量化方向发展，突破当前以C/S架构为主的软件体系，研发B/S架构软件平台，实现基于云平台的交通模型，让用户可以随时随地使用交通模型，而不需要考虑软件的安装、授权、设备运算能力等；另一方面，根据分类型的业务需求，研发场景化的建模工具，引导用户快速、高效地完成指定业务需求的交通模型构建。通过向轻量化、场景化的转变打破技术壁垒，使更多的规划从业人员能更加便捷、高效地构建及使用交通模型，从而促进交通模型及交通规划行业的发展。

超级模型作为平台的核心功能之一，为各类规划方案与需求预测提供高效便捷的模型构建与测试服务。通过全套代码自主研发，降低模型构建应用的门槛，提升交通模型在行业内的通用性。Web端实现模型运行和测试分钟级响应，随时随地调用模型平台服务，让模型快速融入规划应用。通过对道路和公交分配核心算法的优化，极大地提高计算效率与收敛精度。

通过对每个阶段的模型运行结果实现可视化查询和自定义样式配置，并内置蛛网图与期望线等功能的自动计算服务，让用户可以随时随地实现模型构建与测试应用，无须再安装其他软件。