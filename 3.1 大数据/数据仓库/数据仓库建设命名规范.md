- [数据仓库建设命名规范 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/385617423)

### 概述

数据模型是数据管理的分析工具和交流的有力手段；同时，还能够很好地保证数据的一致性，是实现商务智能（Business Intelligence）的重要基础。因此建立、管理一个企业级的数据中心，应该遵循标准的命名和设计规范。

### 命名规范

### 表属性规范

- 表名ODS层表名：　　
  　　前缀为ODS_应用系统名（缩写）_数据表名 。数据表名称必须以有特征含义的单词或缩写组成，中间可以用“_”分割，例如：ODS_FUN_CUSTOMERINFO。表名称不能用双引号包含，表名长度不超过30个字符。如果ODS设计采用贴源设计，数据表名应与源系统一致。
- DW事实表表名　
  　　前缀为DW_主题名（缩写）_功能描述 。数据表名称必须以有特征含义的单词或缩写组成，中间可以用“_”分割，例如：DW_ORD_DETAIL。表名称不能用双引号包含，表名长度不超过30个字符。
- DWS应用层表名

前缀为APP_主题名（缩写）_功能描述 。数据表名称必须以有特征含义的单词或缩写组成，中间可以用“_”分割，例如： APP_RPT_ DEALER_GOODS。表名称不能用双引号包含，表名长度不超过30个字符。

- DW维度表表名

前缀为D_ 。数据表名称必须以有特征含义的单词或缩写组成，中间可以用“_”分割，例如：D_ACCOUNT、D_PUB_DATE。表名称不能用双引号包含，表名长度不超过30个字符。

- 元数据表名

前缀为M_应用名（缩写）_功能描述 。数据表名称必须以有特征含义的单词或缩写组成，中间可以用“_”分割，例如：M_ETL_TASK。表名称不能用双引号包含，表名长度不超过30个字符。

- 表分区名　

前缀为p 分区名必须有特定含义的单词或字串。

例如 ：ods_pstn_detail 的分区p2004100101表示该分区存储 2004100101时段数数据。

- 字段名

字段名称必须用字母开头，采用有特征含义的单词或缩写，不能用双引号包含。尽量将类同的字段排列在一起，，例如开户日期，销户日期等主外键以PK_和FK_等开头

### 索引

普通索引前缀为IDX_。索引名称应是 前缀+表名+构成的字段名。如果复合索引的构成字段较多，则只包含第一个字段，并添加序号。表名可以去掉前缀。

- 主键索引

前缀为IDX_PK_。索引名称应是 前缀+表名+构成的主键字段名，在创建表时候用using index指定主键索引属性。

- 唯一索引

前缀为IDX_UK_。索引名称应是 前缀+表名+构成的字段名。

- 外键索引

前缀为IDX_FK_。索引名称应是 前缀+表名+构成的外键字段名。

- 函数索引

前缀为IDX_func_。索引名称应是 前缀+表名+构成的特征表达字符。

- 簇索引

前缀为IDX_clu_。索引名称应是 前缀+表名+构成的簇字段。

### 其他数据库对象

- 视图

前缀为V_。按业务操作命名视图。

- 物化视图

前缀为MV_。按业务操作命名实体化视图。

- 存储过程

前缀为SP_ 。按业务操作命名存储过程。

- 触发器

前缀为Trig_ 。触发器名应是 前缀 + 表名 + 触发器名。

- 函数

前缀为Func_ 。按业务操作命名函数。

- 数据包

前缀为Pkg_ 。按业务操作集合命名数据包。

- 序列

前缀为Seq_ 。按业务属性命名。

- 普通变量

前缀为Var_ 。 存放字符、数字、日期型变量。

- 游标变量

前缀为Cur_ 。存放游标记录集。

- 记录型变量

前缀为Rec_ 。 存放记录型数据。

- 表类型变量

前缀为Tab_ 。 存放表类型数据。

- 数据库链接

前缀为dbl_ 。 表示分布式数据库外部链接关系

### 质量规范

### 数据质量规范

每个ODS全量表必须配置唯一性字段标识。

每个ODS全量表必须有注释。

每个ODS全量表必须监控分区空数据。

仅有监控要求的ODS表才需要创建数据质量监控规则。未来可以通过数据资产管理系统配置数据质量监控规则。

建议对重要表的重要枚举类型字段进行枚举值变化及枚举值分布监控。

建议对ODS表的数据量及数据记录数设置周同环比监控，如果周同环比无变化，表示源系统已迁移或下线

### 公共字段定义规范

数据统计日期的分区字段按以下标准：

1. 按天分区：ds(YYYYMMDD)。
2. 按小时分区：hh(00~23)。
3. 按分钟：mi(00~59)。
4. is_{业务}：表示布尔型数据字段。以Y和N表示，不允许出现空值域。
5. 原则上不需要冗余分区字段。

### 数据冗余

一个表做宽表冗余维度属性时，应该遵循以下建议准则：

1. 冗余字段与表中其它字段高频率（大于3个下游应用SQL）同时访问。
2. 冗余字段的引入不应造成其本身的刷新完成时间产生过多后延。
3. DW层数据不允许字段重复率大于60%的相同粒度数据表冗余，可以选择在原表基础上拓宽或者在下游应用中通过JOIN方式实现。

### 数据拆分

数据的水平和垂直拆分是按照访问热度分布和数据表非空数据值、零数据值在行列二维空间上分布情况进行划分的。

1. 在物理上划分核心模型和扩展模型，将其字段进行垂直划分。
2. 将访问相关度较高的列在一个表存储，将访问相关度较低的字段分开存储。
3. 将经常用到的Where条件按记录行进行水平切分或者冗余。水平切分可以考虑二级分区手段，以避免多余的数据复制与冗余。
4. 将出现大量空值和零值的统计汇总表，依据其空值和零值分布状况可以做适当的水平和垂直切分，以减少存储和下游的扫描数据量。

### 空值处理原则

1. 汇总类指标的空值：空值处理，填充为零，当前hdp基于列存储的压缩技术不会由于填充大量空值导致存储成本上升。
2. 维度属性值为空：在汇总到对应维度上时，对于无法对应的统计事实，记录行会填充为-99（未知），对应维表会出现一条-99（未知）的记录。