- [数据仓库学习笔记 | 数据仓库常见术语解释 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/565172496)

## 一、数据仓库术语

### 1、实体

实体是指依附的主题，就是我们分析的对象，比如用户、商品等。

### 2、维度

维度就是看待问题的角度，分析业务数据，从什么角度分析，就建立什么样的维度。

### 3、度量

度量是业务流程节点上的一个数值。 比如销量、价格、成本等。

事实表中的度量可分为三类： 完全可加， 半可加， 不可加。

- 完全可加：可进行任意维度汇总，比如销量， 销售额。
- 可以对某些维度汇总，但不能对所有维度汇总。差额是常见的半可加度量，它除了时间维度外，可以跨所有维度进行加法操作。
- 完全不可加的，例如：比率。

### 4、粒度

粒度就是业务流程中对度量的单位，比如商品是按件记录度量，还是按批记录度量。

**选择合适的粒度级别是数据仓库建设好坏的重要内容。数据的粒度一定要保证能够满足用户的决策分析需要**， 这是数据粒度划分策略中最重要的一个准则。

### 5、口径

口径就是取数逻辑（ 如何取数的），比如要取的数是 10 岁以下儿童中男孩的平均身高，这就是统计的口径。

### 6、指标

指标是口径的衡量值，也就是最后的结果。 比如最近七天的订单量，一个促销活动的购买转化率等。

（1）一个指标具体到计算实施， 主要有以下几部分组成：

- 指标加工逻辑，对应sql中的count, sum, avg等。
- 维度，对应 sql 中的 group by。
- 业务限定/修饰词，对应 sql 中的 where。

（2）指标分类：

- 原子指标： 基本业务事实， 没有业务限定、 没有维度。 比如订单表中的订单量、 订单金额都是原子指标。
- 派生指标：时间周期+修饰词+原子指标。比如最近1天通过支付宝支付的金额。时间周期：最近1天，修饰词：支付宝支付，原子指标：支付金额。
- 衍生指标，比如转化率。

（3）**指标最擅长的应用是监测、 分析、 评价和建模。**

### 7、标签

标签是人为设定的、 根据业务场景需求， 对目标对象运用一定的算法得到的高度精炼的特征标识。

**标签最擅长的应用是标注、 刻画、 分类和特征提取。**

### 8、自然键

由现实中已经存在的属性组成的键，它在业务概念中是唯一的，并具有一定的业务含义，比如商品ID，员工ID。

### 9、持久键

保持永久性不会发生变化，比如身份证号。

自然键和持久键区别： 比如说公司员工离职之后又重新入职，他的自然键也就是员工编号发生了变化，但是他的持久键身份证号是不变的。

### 10、代理键

不具有业务含义的键。代理键就是简单的以按照顺序序列生产的整数表示。产品行的第 1 行代理键为 1，则下一行的代理键为 2，如此进行。**代理键的作用仅仅是连接维度表和事实表。**

### 11、退化维度

表示那些看起来像是事实表的一个维度关键字， 但实际上并没有对应的维度表。

比如说订单 id， 这种量级很大的维度， 没必要用一张维度表来进行存储， 而我们进行数据查询或者数据过滤的时候又非常需要，所以这种就冗余在事实表里面， 这种就叫退化维度， citycode 这种我们也会冗余在事实表里面， 但是它有对应的维度表， 所以它不是退化维度。

### 12、下钻

由粗粒度到细粒度来观察数据。年→月→日。

### 13、上卷

由细粒度到粗粒度来观察数据。日→月→年，与下钻相逆。

### 14、数据集市

可以理解为从数据仓库中抽取出来的一个小合集。

------

## 二、数据仓库术语之间的关系

### 1、实体表、事实表、维度表之间的关系

- 维度表： 维度表可以看成是用户用来分析一个事实的窗口， 比如时间维度表，地域维度表。 维度表是事实表的一个分析角度。
- 事实表： 事实表其实就是通过各种维度和一些指标值的组合来确定一个事实的。
- 实体表： 实体表就是一个实际对象的表， 实体表放的数据一定是一条条客观存在的事物数据。

### 2、自然键与代理键在数仓的使用区别

维度表的唯一主键应该是代理键而不应该是自然键。

维度表与事实表的每个连接应该基于无实际含义的整数代理键。 避免使用自然键作为维度表的主键。（维度表可以理解为码表）

### 3、数据集市和数据仓库的关系

数据集市是企业级数据仓库的一个子集， 主要面向部门级业务。