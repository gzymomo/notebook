- [数据仓库学习笔记 | 离线数仓建设核心 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/566657332)

**数仓建设核心思想： 从设计、 开发、 部署和使用层面， 避免重复建设和指标冗余建设， 从而保障数据口径的规范和统一， 最终实现数据资产全链路关联、 提供标准数据输出以及建立统一的数据公共层。**

## **1、数仓分层** 

见笔记[《数仓建设规范指南：一、数据模型架构原则》](https://zhuanlan.zhihu.com/p/562692132)

## **2、数仓建模方法** 

### **2.1 范式建模法** 

目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、第四范式（4NF）、第五范式（5NF）和Boyce-Codd范式（BCNF）。
我们在关系型数据库中的建模方法， 大部分采用的是三范式建模法。三范式的关系必须具有以下三个条件：

- 每个属性值唯一， 不具有多义性 ;
- 每个非主属性必须完全依赖于整个主键， 而非主键的一部分 ;
- 每个非主属性不能依赖于其他关系中的属性， 因为这样的话， 这种属性应该归到其他关系中去。

### **2.2 维度建模法**

维度建模以分析决策的需求出发构建模型，构建的数据模型为分析需求服务。比如星型模式、雪花模式、星座模式。

### **2.3 实体建模法** 

我们可以将任何一个业务过程划分成 3 个部分，实体，事件，说明。

![img](https://pic2.zhimg.com/80/v2-b11ec53dddc1ac6e5c9e1aa47bc14fb1_1440w.webp)

##    **3、维度建模详解** 

### **3.1 维度建模中的表类型** 

事实表的设计是以能够正确记录历史信息为准则， 维度表的设计是以能够以合适的角度来聚合主题内容为准则。
**3.1.1 事实表**
事实表表示对分析主题的度量。比如采集的日志文件、订单表。
事实表分为以下 6 类：

- 事务事实表
- 周期快照事实表
- 累积快照事实表
- 无事实的事实表
- 聚集事实表
- 合并事实表

**3.1.2 维度表**

- 维度表包含单一主键列。
- 维度表通常比较宽，包含大量的低粒度的文本属性。
- 当给定维度行没有被全部填充时，或者当存在属性没有被应用到所有维度行时，将产生空值维度属性。 推荐采用描述性字符串代替空值，如使用unknown 或 not applicable 替换空值。

### **3.2 维度建模三种模式** 

**3.2.1 星型模式**
星型模式(Star Schema)是最常用的维度建模方式。星型模式是以事实表为中心，所有的维度表直接连接在事实表上。
**3.2.2 雪花模式**
雪花模式(Snowflake Schema)是对星型模式的扩展。 雪花模式的维度表可以拥有其他维度表，由于这种模型不太容易理解，维护成本比较高，而且性能方面需要关联多层维表，所以一般不是很常用。
**3.2.3 星座模式**
星座模式是星型模式延伸而来，星型模式是基于一张事实表的，而星座模式是基于多张事实表的，而且共享维度信息。在业务发展后期，绝大部分维度建模都采用的是星座模式。

###   **3.3 维度建模过程**

选择业务过程→声明粒度→确认维度→确认事实。