- [数据仓库系列之总线架构 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/110947470)

总线架构是数据仓库建设的总体规划，从整体视角描述了解决方案的维度模型，描述了各个子系统的功能以及关系，描述数据从源系统到决策系统的数据流程，提供建立企业数据仓库系统的增量式方法。业务需求回答了要做什么，总线架构就是回答怎么做的问题。

## 一、数据仓库整体解决方案架构

数据仓库的核心功能从源系统抽取数据，通过清洗、转换、标准化，将数据加载到BI平台，进而满足业务用户的数据分析和决策支持。数据仓库整体解决方案架构包含三个部分：源数据、数据仓库、数据应用。

![img](https://pic2.zhimg.com/80/v2-215352c49ceccf88a92a058b9dd710ad_1440w.webp)

数据仓库整体解决方案架构

## 二、数据仓库分层架构：

![img](https://pic1.zhimg.com/80/v2-5700e085f8b0e96a4733fc2531a38864_1440w.webp)

数据仓库分层架构

数据仓库的数据来源于不同的源数据，并提供多样的数据应用，数据自下而上流入数据仓库后向上层开放应用，而数据仓库可以是数据中心管控平台。

源数据层（ODS）：此层数据无任何更改，直接沿用外围系统数据结构和数据，不对外开放；为临时存储层，是接口数据的临时存储区域，为后一步的数据处理做准备，一般只会进行数据筛选和异常处理。

数据转换层（DSA）：数据加工区域，主要涉及数据的转换数据，清洗数据，过滤数据等操作。

数据仓库层（EDW）：DW 层的数据应该是一致的、准确的、干净的数据，即对源系统数据进行了清洗（去除了杂质）后的数据。

数据应用层（DA 或 APP）：前端应用直接读取的数据仓库；根据报表、专题分析需求而计算生成的数据，数据仓库是数据处理的后台，业务用户并不关心后台怎么处理。数据应用是数据呈现的前台，是业务用户进行查询的入口。BI应用程序的体验也是衡量数据仓库是否成功的主要因素。好的数据仓库搭建平台可以通过数据仓库将数据发送到前端进行分析数据。

 数据仓库从各数据源获取数据及在数据仓库内的数据转换和流动都可以认为是ETL的过程，ETL 是数据仓库的流水线，也可以认为是数据仓库的血液，它维系着数据仓库中数据的新陈代谢，而数据仓库日常的管理和维护工作的大部分精力就是保持 ETL 的正常和稳定。

## 三、为什么要对数据仓库架构进行分层？

数据仓库的分层是在利用空间换时间，通过大量的预处理来提升应用系统的用户体验（效率），因此数据仓库会存在大量冗余的数据；不分层的话，如果源业务系统的业务规则发生变化将会影响整个数据清洗过程，工作量巨大。通过数据分层管理可以简化数据清洗的过程，因为把原来一步的工作分到了多个步骤去完成，相当于把一个复杂的工作拆成了多个简单的工作，将数据仓库分层后更加方便处理每一层，这样每一层的处理逻辑都相对简单和容易理解，我们也比较容易保证每一个步骤的正确性，当数据发生错误的时候，往往我们只需要局部调整某个步骤即可。

分层也要适当，如果项目较小完全可以直接使用两层架构来完成工作就没有必要搭建三层架构。

## 四、架构的特点：

1、易用性，数据仓库的目的是决策支持系统(Decision Support System ，简称DSS)，既然面向的的是分析用户，那么数据越容易理解，越能受用户欢迎，而维度建模包含具有描述特性的维度表可以让用户很容易理解数据，而不像范式建模，由于太过规范化而导致用户对数据的理解有一定的难度，需要对业务的很深很细的了解。

2、性能高，通过数据的处理，排序和整合，构建出来的维度表，不仅能够让用户很方便的理解数据，使用数据，而且在计算所需要的数据的时候，不需要关联太多的表，从而使得计算的性能很高。

3、扩展性，具有非常好的可扩展性，以便容纳不可预知的新数据源和新的设计决策。可以很方便在不改变模型粒度情况下，增加新的分析维度和事实，不需要重载数据，也不需要为了适应新的改变而重新编码。

## 五、总结

![img](https://pic1.zhimg.com/80/v2-414e3e2caa965fb84047df6fa105edd0_1440w.webp)

业务模型矩阵

通过使用维度建模，用户可以得到很好的效果，只有用户满意了，数据仓库才能实现更大的价值。可以说维度建模的核心是星型模型，星型模型所拥有的特点正是用户方便使用的根源。维度模型也有缺点，比如数据一致性很难保证，数据冗余，维度信息处理等，但这些相对于它的优点来讲都是可接受的，而且也可以通过其他方式避免和简化的。如果以维表为总线，事实表以维表为基础的总线矩阵，建设出来的架构正是总线式架构。