- [公司版本控制管理解决方案](https://www.cnblogs.com/kmust/p/4918498.html)

## 一、背景

随着信息化技术的不断发展和办公自动化的迅速普及，电子文件大量出现并逐步取代纸质文件。为满足信息中心管理和运用电子文件的要求，解决电子文件资源分散、版本控制、安全管理、协同办公以及对外包项目代码的管理等方面的问题，经研究，决定在本公司推广SVN管理工具。

## 二、服务器配置

### 2.1、新旧服务器的选择

用SVN来对公司的代码和电子档案和文件进行版本管理，因涉及到SVN面向人数较多，文件和数据量较大，对运行的稳定性具有一定的要求，但如果采用一般的PC机满足不了使用需求和不方便进行管理，因此决定将SVN部署到服务器上。

在对SVN进行服务器部署时，分为两个阶段进行试运行，第一阶段是对旧有的服务器进行改造，第二阶段当旧有的服务器不能满足需求时，将SVN进行迁移到新的服务器上。

阶段一：

考虑到SVN服务器是开始试运行，因为使人数上和使用范围上还不是太大，而且对SVN的需求也还不是非常的明确，因此对旧有服务器进行一定的改造，然后在旧有服务器上部署SVN。

改造方式：采用原有服务器+磁盘阵列的方式搭建。

优点：

（1） 成本低，服务器有现成设备，磁盘阵列使用原来隧道使用的威联通磁盘阵列。

（2） 将SVN服务器软件部署到服务器上，数据部署到磁盘阵列上，提高系统的可使用性和灵活性。

（3） 一旦服务器出问题，可以使用另外服务器来安装SVN服务器端程序，连接磁盘阵列的数据进行恢复。

（4） 使用该方式时，如果以后考虑更换新的服务器，可以进行方便的数据迁移。

缺点：

（1） 原有的服务器使用年限较长，属于被淘汰服务器，一般使用在测试项目上，不适合做重要数据的存储服务。

阶段二：

随着使用人数和使用范围的增加，旧有的服务器已不能满足公司的业务和办公需求，需要更换为新的服务器，从旧的服务器置换到新的服务器上不需要太繁琐的配置，只需要将磁盘阵列和相关的配置文件进行迁移即可。

### 2.2、服务器管理

#### 2.2.1、服务器安全

此SVN服务器仅部署在公司内网进行使用，不对外开放，因此在服务器的安全上，只需安装相关的杀毒软件和升级系统补丁即可。

#### 2.2.2、故障恢复

一旦服务器出现故障，无法提供服务时，因为SVN的数据是存储在磁盘阵列上的，只需将磁盘阵列重新挂载在新的服务器上即可。

### 2.3、客户端要求

SVN的客户端支持windows、Linux、Mac版本，根据实际需求安装。

客户端对服务器的访问方式有网页访问方式和客户端访问方式，即可满足专业人士对SVN的操作，也可满足一般办公人员方便、快捷地对SVN进行操作。

### 2.4、服务器需求

硬盘容量：1T以上

CPU:双核及以上，主频1.5GHz或1.5GHz以上

内存：2G或2G以上

## 三、SVN搭建

SVN是一个C/S架构的软件，系统搭建分为服务器端和客户端，但为了满足一般办公人员对SVN的使用方便，要求通过网页也可以对SVN进行网页访问操作。

### 3.1、SVN版本的选择

 SVN有Windows、Linux版本，第一阶段推广试用SVN服务器，建议安装Windows版，原因如下：

1) Windows、Linux下SVN的功能一致，只是安装软件的版本不同，windows版在管理、维护上更为方便。

2) 服务器安装在windows下，客户端可以在Windows、Mac和Linux下使用，不影响跨平台开发。

3) 在后期如果确实需要，SVN服务器支持从Windows下迁移到Linux下。

### 3.2、运行方式的选择

#### 3.2.1、服务器运行方式选择

在公司推广试用SVN的第一阶段，建议采用独立服务器运行的方式，原因如下：

优点：

（1）独立服务器运行方式和Apache服务器下SVN的功能一致，而且独立服务器运行方式在管理、维护上更为方便。

（2）独立服务器运行方式安装、配置较为简单，即使服务器发生故障，也能快速迁移。

（3）如果随着公司业务的发展，确实有更多功能扩展上的需求，SVN服务器支持从独立服务器运行迁移到Apache服务器运行。

缺点：

（1）独立服务器运行相比较于Apache服务器运行在系统功能扩展性上没有Apache的高。

#### 3.2.2、存储版本数据

SVN存储版本数据也有2种方式：BDB和FSFS。因为BDB方式在服务器中断时，有可能锁住数据，所以还是FSFS方式更安全一点。故选用FSFS。

### 3.3、需要安装软件

- VisualSVN服务器
- TortoiseSVN客户端
- 中文简体汉化包
- 网页浏览器

### 3.4、用户权限划分

（1）分组管理

不同类型的资料可以按资料类型或部门进行分组管理，建议按部门进行分组管理。

（2）文件权限管理

文件类型的可选项有只读、读写或没有权限三种。

### 3.5、配置自动运行脚本

（1）软件数据自动备份。

（2）软件自动启动。

### 3.6、功能使用测试

对系统完成部署之后。需要对系统进行一定的测试，测试包括：

用户权限测试：用户登录测试、文件检出测试、文件读写测试

基本功能测试：取出、更新 、导入、加入

文件操作测试：改名、删除、移动、还原

### 3.7、编写相关文档资料

1) 维护文档

要求：（图文并茂）

软件安装说明：（服务器端、客户端）

数据备份说明：（如何数据备份、迁移、以及还原）

日常运维脚本：（设置软件自动启动、自动定时备份等）

日常管理说明：（人员、人员权限的添加/删除/查询/修改）

2) 用户使用文档

要求：图文并茂

内容：检入、检出、更新文件、新增文件、删除文件等

## 四、具体实施过程

1) 准备服务器、磁盘阵列、外购磁盘

2) 服务器安装Server2003系统，磁盘阵列重新做Raid5

3) 磁盘阵列挂载到服务器，做为服务器的一个硬盘使用

4) 安装SVN服务器端软件

5) 安装SVN客户端相关软件

6) 配置相关的运行环境和脚本

7) 编写相关的资料文档

## 五、文件管理

### 5.1、文档资料

#### 5.1.1、资料类别

用于存放公司的规则制度、发文、部门文档、文件等。

#### 5.1.2、维护文档

考虑到此服务器文件的安全性，每天对SVN进行自动增量备份一次，并对备份时间和备份文件夹做日志记录，每隔一年需要对SVN进行手动备份一次，并对相关的备份信息进行记录。

#### 5.1.3、管理文档

此服务器交由专门的人进行目录的管理，如果需要新添某一目录可由申请人填写目录申请表交到技术支持部，由技术支持部负责人负责目录的添加和权限的分配。

### 5.2、文档目录

用于规定公司相关目录的建立规则，方便文档的管理和维护。

| 一级目录名称     | 二级目录名称   | 备注                       |
| ---------------- | -------------- | -------------------------- |
| 公共文档库       |                | 用于存放公司的公共文档资料 |
| 部门文档库       | 管理层         | 用于存放各个部门的相关资料 |
| 综合部           |                |                            |
| 研发部           |                |                            |
| 技术支持部       |                |                            |
| 营销部           |                |                            |
| 生产部           |                |                            |
| 工程部           |                |                            |
| 项目文档库       | 软件项目文档库 | 用于存放相关项目为目录     |
| 非软件项目文档库 |                |                            |
| 临时文档库       |                | 用于存放临时文件           |

#### 5.2.1、公共文档库

用于存放公司的公共信息的文档，任何人都可读，但是除了经理等人可以写以外，其他人都不可以写。

| 一级目录名称     | 二级目录名称   | 三级目录名称 |
| ---------------- | -------------- | ------------ |
| 公共文档库       | 管理办法及发文 | 公司管理办法 |
| 公司发文         |                |              |
| 文理制度         | 项目管理制度   |              |
| 人力资源管理制度 |                |              |
| 财务管理制度     |                |              |
| 文档模板         |                |              |
| 考核管理         | 进度管理       |              |
| 月度考核         |                |              |
| 年度考核         |                |              |
| 沟通管理         | 通讯录         |              |
| 会议管理         |                |              |
| 外部交流         |                |              |
| 知识管理         | 培训管理       |              |
| 业务相关知识     |                |              |
| 电力相关知识     |                |              |
| 行业相关知识     |                |              |
| 团队活动         | 活动照片       |              |
| 活动视频         |                |              |

#### 5.2.2、部门文档库

用于存放各个部门的相关文档，各个部门的人都可以看到本部门提交的文件及历史版本。

| 一级目录名称 | 二级目录名称 | 三级目录名称 |
| ------------ | ------------ | ------------ |
| 部门文档库   | 部门规范     | 制度规范     |
| 配置管理     |              |              |
| 部门模板     | 部门模板     |              |
| 考核管理     | 进度管理     |              |
| 转正考核     |              |              |
| 晋升考核     |              |              |
| 年度考核     |              |              |
| 知识管理     | 培训管理     |              |
| 知识体系     |              |              |
| 沟通管理     | 会议管理     |              |
| 外部交流     |              |              |
| 团队活动     |              |              |

#### 5.2.3、项目文档库

| 一级目录名称 | 二级目录名称 | 目录内容   |
| ------------ | ------------ | ---------- |
| 软件项目     | 项目启动     | 招投标文件 |
| 项目立项资料 |              |            |
| 需求分析     | 需求调研     |            |
| 需求分析     |              |            |
| 原始资料     |              |            |
| 业务标准     |              |            |
| 系统设计     | 相关设计文档 |            |
| 软件开发     | 开发计划     |            |
| 源代码       |              |            |
| 系统测试     | 测试计划     |            |
| 测试用例     |              |            |
| 测试报告     |              |            |
| 项目实施     | 方案计划     |            |
| 实施资料     |              |            |
| 实施报告     |              |            |
| 过程文档     |              |            |
| 项目验收     |              |            |
| 沟通过程     | 会议纪要     |            |
| 访谈纪要     |              |            |
| 项目报告     |              |            |
| 配置管理     |              |            |
| 非软件项目   | 项目启动     | 招投标文件 |
| 项目立项资料 |              |            |
| 解决方案     |              |            |
| 方案照片     |              |            |
| 其他         |              |            |

###  5.3、SVN目录配置清单

| SVN目录配置清单 |        |        |          |          |            |            |          |
| --------------- | ------ | ------ | -------- | -------- | ---------- | ---------- | -------- |
| 序号            | 库名称 | 库地址 | 创建时间 | 使用部门 | 部门联系人 | 使用状态   | 文件大小 |
| 1               |        |        |          |          |            |            |          |
| 2               |        |        |          |          |            |            |          |
| 3               |        |        |          |          |            |            |          |
| 4               |        |        |          |          |            |            |          |
| 5               |        |        |          |          |            |            |          |
| 6               |        |        |          |          |            |            |          |
| 7               |        |        |          |          |            |            |          |
| 8               |        |        |          |          |            |            |          |
| 9               |        |        |          |          |            |            |          |
| 10              |        |        |          |          |            |            |          |
| 11              |        |        |          |          |            |            |          |
| 12              |        |        |          |          |            |            |          |
| 13              |        |        |          |          |            |            |          |
| 14              |        |        |          |          |            |            |          |
| 15              |        |        |          |          |            |            |          |
| 16              |        |        |          |          |            |            |          |
| 17              |        |        |          |          |            |            |          |
| 18              |        |        |          |          |            |            |          |
| 19              |        |        |          |          |            |            |          |
| 20              |        |        |          |          |            |            |          |
|                 |        |        |          |          |            | 填表人：   |          |
|                 |        |        |          |          |            | 填表时间： |          |

### 5.4、项目库用户权限清单

为规范管理用户及权限，保证公司文件的安全性和保密性，故使用项目库用户权限清单对每个项目库的用户和权限进行记录。系统管理员必须保证用户权限清单的正确性：（1）定期检查核对；（2）在发生变更，及时更新数据。

| XX项目库用户权限清单 |          |            |          |            |          |      |      |      |      |          |      |      |
| -------------------- | -------- | ---------- | -------- | ---------- | -------- | ---- | ---- | ---- | ---- | -------- | ---- | ---- |
|                      |          | 项目名称： |          |            |          |      |      |      |      | 时间：   |      |      |
|                      |          | 项目经理： |          |            |          |      |      |      |      | 制表人： |      |      |
| 库名称及地址         | 一级目录 | 二级目录   | 三级目录 | 项目管理者 | 项目成员 |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |
|                      |          |            |          |            |          |      |      |      |      |          |      |      |

用户权限清单如下表所示：

### 5.5、系统维护记录

| SVN系统维护记录表 |          |          |          |          |      |
| ----------------- | -------- | -------- | -------- | -------- | ---- |
| 维护人            | 维护时间 | 维护类别 | 维护原因 | 维护结果 | 备注 |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |
|                   |          |          |          |          |      |

维护类别有：增量备份、全局备份、 数据恢复、软件安装、软件升级、系统升级等。