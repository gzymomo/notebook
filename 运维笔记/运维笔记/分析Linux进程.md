[TOC]

# 1、何为进程
 - 程序是一些保存在磁盘上的指令的有序集合，是静态的。
 - 进程是程序执行的过程，包括了动态创建、调度和消亡的整个过程，它是程序资源管理的最小单位。
 - 线程是操作操作系统能够进行运算调度的最小单位。大部分情况下，它被包含在进程之中，是进程中的实际运作单位，一个进程内可以包含多个线程，是资源调度的最小单位。
![多线程程序模型](https://mmbiz.qpic.cn/mmbiz_jpg/MOhGwZG2NrM2sUFfdOJVPic7rXw8RYrp4STteP8ZnsFThSE2a1Xianfh5rKKaGhpyj828L7jtKVgFrr6G8zxq1FA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

# 2、ps
一般用法是ps -ef列出系统内经常信息，通常都会带管道grep出自己感兴趣的进程，像这样ps -ef|grep intresting第一列PID代表进程号，PPID（parent process ID）代表父进程号。

# 3、strace
跟踪进程内部的系统调用和信号。
系统调用（system call），指运行在「用户态」的程序向操作系统「内核态」请求需要更高权限运行的服务，系统调用提供用户程序与操作系统之间的接口。
strace后面跟着启动一个进程，可以跟踪启动后进程的系统调用和信号，这个命令可以看到进程执行时候都调用了哪些系统调用，通过指定不同的选项可以输出系统调用发生的时间，精度可以精确到微秒，甚至还可以统计分析系统「调用的耗时」，这在排查进程假死问题的时候很有用，能帮你发现进程卡在哪个系统调用上。已经在运行的进程也可以指定-p参数加pid像gdb attach那样附着上去跟踪。

# 4、pstack
打印出运行中程序的堆栈信息。

执行命令pstack pid 你能看到当前线程运行中的堆栈信息，其中的pid可用之前的ps命令获得，pstack可以看到进程内启动的线程号，每个进程内线程的「堆栈」内容也能看到。

LPW是指Light-weight process 轻量级线程。
 1. Linux中没有真正的线程
 2. Linux中没有的线程Thread是由进程来模拟实现的所以称作：轻量级进程
 3. 进程是「资源管理」的最小单元，线程是「资源调度」的最小单元（这里不考虑协程）

# 5、pstree
按树形结构打印运行中进程结构信息。
可以直观的查看进程和它启动的线程的关系，并能显示进程标识。

# 6、gdb
gdb是GNU开发的gcc套件中Linux下程序调试工具，你可以查看程序的堆栈、设置断点、打印程序运行时信息，甚至还能调试多线程程序，功能十分强大。

# 7、proc目录
/proc目录下有很多以数字命名的目录，每个数字代表进程号PID它们是进程目录。系统中当前运行的每一个进程在/proc下都对应一个以进程号为目录名的目录/proc/pid，它们是读取进程信息的接口，我们可以进到这个文件里面，了解进程的运行时信息和统计信息。
/proc/pid目录下的有一些重要文件，挑几个使用频率高的讲一讲。/proc/pid/environ 包含了进程的可用环境变量的列表 。程序出问题了如果不确定环境变量是否设置生效，可以cat这个文件出来查看确认一下。
/proc/pid/fd/ 这个目录包含了进程打开的每一个文件的链接。从这里可以查看进程打开的文件描述符信息，包括标准输入、输出、错误流，进程打开的socket连接文件描述符也能看到，lsof命令也有类似的作用。
/proc/pid/stat包含了进程的所有状态信息，进程号、父进程号、 线程组号、 该任务在用户态运行的时间 、 该任务在用内核态运行的时间、 虚拟地址空间的代码段、 阻塞信号的位图等等信息应有尽有。
其他统计：
 - /proc/pid/cmdline 该文件保存了进程的完整命令行
 - /proc/pid/cwd一个符号连接, 指向进程当前的工作目录
 - /proc/pid/exe包含了正在进程中运行的程序链接
 - /proc/pid/mem包含了进程在内存中的内容
 - /proc/pid/statm包含了进程的内存使用信息